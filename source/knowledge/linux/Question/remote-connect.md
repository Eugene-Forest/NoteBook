# “远程”连接虚拟机

此远程非彼远程，此意为 本机 [^id4] 连接 虚拟机 [^id5] ，虽然从实体机器上是本地相连，但是从软件逻辑上与远程无异。

首先在使用以下服务是，请确认虚拟机的网络适配器的配置为 NAT 模式，且虚拟机可以ping通本机。

:::{note}
本文的网络配置的前置状态可通过该文章实现： {ref}`NAT模式上网配置 <NAT模式上网配置>`。
:::

## 使用xshell连接虚拟机

前提条件，本机的网络连接 VMware Network Adapter VMnet8 的 Ipv4 的地址不与目标虚拟机的ip冲突/相同。

**现有条件**：虚拟机的ip地址为192.168.223.129，本机的网络连接 VMware Network Adapter VMnet8 的 Ipv4 的地址为192.168.223.127。

同时，需要通过控制台配置虚拟网络的端口转接器。步骤如下：

1. 打开 VMware 的虚拟网络编辑器
2. 进入管理员模式
3. 点击 NAT 类型网络，点击 NAT 配置进入配置界面
4. 设置端口转发，将本机22端口数据转发到目标地址的22端口。

```{image} ../../../img/linux/question/nat_connect.png
:alt: "VMware \u7684\u865A\u62DF\u7F51\u7EDC\u7AEF\u53E3\u8F6C\u53D1\u8BBE\u7F6E"
```

一般来说，通过以上设置即可通过xshell连接虚拟机。若还是不成功，通过虚拟机防火墙将端口22开放。

## 使用navicat连接虚拟机数据库

通过虚拟机防火墙将端口3306开放。命令如下：

`firewall-cmd --zone=public --add-port=3306/tcp --permanent`

`firewall-cmd --reload`

然后仿照 使用xshell连接虚拟机 的配置方法设置端口转发。

______________________________________________________________________

[^id4]: 本机——指的是安装了 VMware 工作台的电脑。

[^id5]: 虚拟机—— VMware 工作台内的操作系统
