# ip 地址类别的划分

IP 地址的编址方法经历了三个阶段：

- 分类的 IP 地址
- 子网的划分
- 构成超网

## 分类的 IP 地址

两级的 IP 地址为 **网络号(net-id)+主机号(host-id)**

IP 地址由32位标识符（二进制数）组成；它可分为五类，分别为 A 类、 B 类 、C 类 、D 类 和 E 类。

```{image} ../../img/internet/IP.png
:alt: IP
```

### 不同类别 IP 地址的指派范围

| 网络类别 | 可指派的网络数       | 第一个可指派的网络号 | 最后一个可指派的网络号 | 每个网络中可指派的主机数 |
| -------- | -------------------- | -------------------- | ---------------------- | ------------------------ |
| A        | 126（2的7次方-2）    | 1                    | 126                    | 16777214                 |
| B        | 16384（2的14次方）   | 128.0                | 191.255                | 65534                    |
| C        | 2097152（2的21次方） | 192.0.0              | 223.255.255            | 254                      |

:::{note}

对于被赋予特殊含义的 IP 地址：

- IP 地址中全为0表示 “this”。网络号全为0的IP是个保留地址，指的是本网络。
- 网络号为 127(01111111)保留为本地软件环回测试本主机的进程之间的通信之用。
- 对于 A 类地址：
  : - host-id 全为0： 这种情况表示的是本机所处的网络的地址。
    - host-id 全为1： 这种情况表示的是本机所处的网络的所有主机。
:::

### 具有特殊含义的 IP 地址

| 网络号 | 主机号              | 源地址使用 | 目的地址使用 | 含义                         |
| ------ | ------------------- | ---------- | ------------ | ---------------------------- |
| 0      | 0                   | 可以       | 可以         | 本网络上的本主机             |
| 0      | host-id             | 可以       | 不可以       | 本网络上的某台主机           |
| 全1    | 全1                 | 不可       | 可以         | 只在本网络上进行广播         |
| net-id | 全1                 | 不可       | 可以         | 对net-id上的所有主机进行广播 |
| 127    | 非全零或全1的任何数 | 可以       | 可以         | 用于本地软件环回测试         |

## 子网的划分

### 子网掩码

设置三级 IP 地址的目的:

- 提高 IP 地址空间的利用率
- 避免因为给每个物理网络分配一个网络号导致路由表变得太大而使得网络性能变坏
- 提高 IP 地址的灵活性

三级 IP 地址 ： **IP=网络号+子网号+主机号**

```{image} ../../img/internet/subnet_instance.png
:alt: "\u5B50\u7F51\u5212\u5206\u5B9E\u4F8B"
```

```{image} ../../img/internet/subnet_default.png
:alt: "A\u3001B\u3001C\u7C7B\u7F51\u7EDC\u7684\u9ED8\u8BA4\u5B50\u7F51\u63A9\u7801"
```

```{image} ../../img/internet/B_subnet.png
:alt: "B \u7C7B\u7F51\u7EDC\u7684\u5B50\u7F51\u5212\u5206"
```
